title: 'Diffusers TTI'
author: 'ParisNeo'
version: 1.0.1
binding_name: 'diffusers'
supported_file_types: []

description: |
  This binding integrates Hugging Face's Diffusers library into LoLLMS
  for Text-to-Image (TTI) and Image-to-Image (ITI) tasks.

  It supports a wide range of diffusion-based models (e.g., Stable Diffusion,
  Stable Diffusion XL, Kandinsky, etc.), as provided through the `diffusers`
  ecosystem.

  Two main operations are supported:

  1. generate_image:
     - Generates one or multiple images from a text prompt.
     - Supports configuration of model, size, guidance scale, inference steps, scheduler, etc.

  2. edit_image (image-to-image / inpainting):
     - Modifies an existing image based on a prompt and optional mask.
     - Useful for inpainting, outpainting, or style transformation.

  Parameters can be set globally at initialization (e.g., default model, steps, scheduler),
  or per-request at runtime. Runtime overrides global, which overrides defaults.

input_parameters:
  - name: "port"
    type: "int"
    default: 9620
    description: "The port number on which the dedicated Diffusers server will run."

  - name: "extra_models_path"
    type: "str"
    default: ""
    description: "An optional path to an extra folder containing personalized models (.safetensors files)."

  - name: "device"
    type: "str"
    default: "cuda"
    description: "Device to run the model on (e.g., 'cuda', 'mps', 'cpu')."

  - name: "dtype"
    type: "str"
    default: "float16"
    description: "Torch dtype to use for inference ('float16' recommended for GPU)."

  - name: "seed"
    type: "int"
    default: 42
    description: "Random seed for reproducibility."

  - name: "scheduler_name"
    type: "str"
    default: "default"
    description: "Default scheduler to use for denoising steps. Can be overridden per generation."
    options: ["default", "ddim", "ddpm", "deis_multistep", "dpm_multistep", "dpm_multistep_karras", "dpm_single", "dpm_adaptive", "dpm++_2m", "dpm++_2m_karras", "dpm++_2s_ancestral", "dpm++_2s_ancestral_karras", "dpm++_sde", "dpm++_sde_karras", "euler_ancestral_discrete", "euler_discrete", "heun_discrete", "heun_karras", "lms_discrete", "lms_karras", "pndm", "unipc_multistep", "dpm++_2m_sde", "dpm++_2m_sde_karras", "dpm2", "dpm2_karras", "dpm2_a", "dpm2_a_karras", "euler", "euler_a", "heun", "lms"]

  - name: "num_inference_steps"
    type: "int"
    default: 50
    description: "Number of denoising steps (more steps = higher quality, slower)."

  - name: "guidance_scale"
    type: "float"
    default: 7.5
    description: "Classifier-free guidance scale. Higher = more prompt adherence."

  - name: "negative_prompt"
    type: "str"
    default: ""
    description: "Optional negative prompt to avoid unwanted features."

  - name: "width"
    type: "int"
    default: "1024"
    description: "Image width."

  - name: "height"
    type: "int"
    default: "1024"
    description: "Image height."

    
generate_image_parameters:
  - name: "prompt"
    type: "str"
    default: ""
    description: "The text prompt describing the image to generate."

  - name: "negative_prompt"
    type: "str"
    default: ""
    description: "Optional negative prompt to avoid unwanted features."

  - name: "size"
    type: "str"
    default: "1024x1024"
    description: "Image size in WxH format. E.g., '512x512', '1024x1024'."

  - name: "n"
    type: "int"
    default: 1
    description: "Number of images to generate per request."

  - name: "num_inference_steps"
    type: "int"
    default: 50
    description: "Number of denoising steps (more steps = higher quality, slower)."

  - name: "guidance_scale"
    type: "float"
    default: 7.5
    description: "Classifier-free guidance scale. Higher = more prompt adherence."

  - name: "scheduler_name"
    type: "str"
    default: "default"
    description: "Scheduler to use for this generation request. Overrides global scheduler if provided."
    options: ["default", "ddim", "ddpm", "deis_multistep", "dpm_multistep", "dpm_multistep_karras", "dpm_single", "dpm_adaptive", "dpm++_2m", "dpm++_2m_karras", "dpm++_2s_ancestral", "dpm++_2s_ancestral_karras", "dpm++_sde", "dpm++_sde_karras", "euler_ancestral_discrete", "euler_discrete", "heun_discrete", "heun_karras", "lms_discrete", "lms_karras", "pndm", "unipc_multistep", "dpm++_2m_sde", "dpm++_2m_sde_karras", "dpm2", "dpm2_karras", "dpm2_a", "dpm2_a_karras", "euler", "euler_a", "heun", "lms"]

edit_image_parameters:
  - name: "prompt"
    type: "str"
    default: ""
    description: "The prompt describing the edit or transformation."

  - name: "image"
    type: "str"
    default: ""
    description: "The input image to edit. Can be a base64 string, URL, or local file path."

  - name: "mask"
    type: "str"
    default: ""
    description: "Optional mask image for inpainting. White areas = editable."

  - name: "size"
    type: "str"
    default: "1024x1024"
    description: "Size of the output image."

  - name: "num_inference_steps"
    type: "int"
    default: 50
    description: "Number of denoising steps."

  - name: "guidance_scale"
    type: "float"
    default: 7.5
    description: "Prompt adherence strength."

  - name: "strength"
    type: "float"
    default: 0.8
    description: "Strength of transformation when editing an image."

  - name: "scheduler_name"
    type: "str"
    default: "default"
    description: "Scheduler to use for this edit request. Overrides global scheduler if provided."
    options: ["default", "ddim", "ddpm", "deis_multistep", "dpm_multistep", "dpm_multistep_karras", "dpm_single", "dpm_adaptive", "dpm++_2m", "dpm++_2m_karras", "dpm++_2s_ancestral", "dpm++_2s_ancestral_karras", "dpm++_sde", "dpm++_sde_karras", "euler_ancestral_discrete", "euler_discrete", "heun_discrete", "heun_karras", "lms_discrete", "lms_karras", "pndm", "unipc_multistep", "dpm++_2m_sde", "dpm++_2m_sde_karras", "dpm2", "dpm2_karras", "dpm2_a", "dpm2_a_karras", "euler", "euler_a", "heun", "lms"]
