author: 'LoLLMS Team'
version: 1.0.0
binding_name: 'diffusers'
display_name: 'Diffusers'
supported_file_types: []

# Input parameters are used to initialize the binding.
# These settings are configured once and typically require a model reload if changed.
input_parameters:
  - name: "model_name"
    type: "str"
    default: "runwayml/stable-diffusion-v1-5"
    description: "The local path, Civitai key, or Hugging Face repository ID of the model to be used."
    options: ["runwayml/stable-diffusion-v1-5", "stabilityai/stable-diffusion-xl-base-1.0", "dreamshaper-8", "realistic-vision-v6"]
  - name: "unload_inactive_model_after"
    type: "int"
    default: 0
    description: "Unloads the model from VRAM after a specified number of seconds of inactivity. Set to 0 to keep the model loaded."
  - name: "device"
    type: "str"
    default: "auto"
    description: "The device to run the model on. 'auto' will select CUDA if available, otherwise CPU."
    options: ["auto", "cuda", "cpu", "mps"]
  - name: "torch_dtype_str"
    type: "str"
    default: "auto"
    description: "The torch data type to use. 'auto' selects float16 for CUDA and float32 for CPU."
    options: ["auto", "float16", "bfloat16", "float32"]
  - name: "scheduler_name"
    type: "str"
    default: "default"
    description: "The noise scheduler to use for the diffusion process."
    options: [
      "default",
      "ddim",
      "ddpm",
      "deis_multistep",
      "dpm_multistep",
      "dpm_multistep_karras",
      "dpm_single",
      "dpm_adaptive",
      "dpm++_2m",
      "dpm++_2m_karras",
      "dpm++_2s_ancestral",
      "dpm++_2s_ancestral_karras",
      "dpm++_sde",
      "dpm++_sde_karras",
      "euler_ancestral_discrete",
      "euler_discrete",
      "heun_discrete",
      "heun_karras",
      "lms_discrete",
      "lms_karras",
      "pndm",
      "unipc_multistep",
      "dpm++_2m_sde",
      "dpm++_2m_sde_karras",
      "dpm2",
      "dpm2_karras",
      "dpm2_a",
      "dpm2_a_karras",
      "euler",
      "euler_a",
      "heun",
      "lms"
    ]
  - name: "safety_checker_on"
    type: "bool"
    default: true
    description: "Enables the safety checker to prevent generating potentially unsafe content."
  - name: "enable_xformers"
    type: "bool"
    default: false
    description: "Enables xFormers for memory-efficient attention, which can speed up generation and reduce VRAM usage."
  - name: "enable_cpu_offload"
    type: "bool"
    default: false
    description: "Enables model CPU offloading to save VRAM at the cost of slower generation speed."

# Model parameters are used for each generation request.
# These settings can be overridden at runtime for each call to `generate_image`.
model_parameters:
  - name: "scheduler_name"
    type: "str"
    default: "default"
    description: "The noise scheduler to use for the diffusion process."
    options: [
      "default",
      "ddim",
      "ddpm",
      "deis_multistep",
      "dpm_multistep",
      "dpm_multistep_karras",
      "dpm_single",
      "dpm_adaptive",
      "dpm++_2m",
      "dpm++_2m_karras",
      "dpm++_2s_ancestral",
      "dpm++_2s_ancestral_karras",
      "dpm++_sde",
      "dpm++_sde_karras",
      "euler_ancestral_discrete",
      "euler_discrete",
      "heun_discrete",
      "heun_karras",
      "lms_discrete",
      "lms_karras",
      "pndm",
      "unipc_multistep",
      "dpm++_2m_sde",
      "dpm++_2m_sde_karras",
      "dpm2",
      "dpm2_karras",
      "dpm2_a",
      "dpm2_a_karras",
      "euler",
      "euler_a",
      "heun",
      "lms"
    ]  
  - name: "width"
    type: "int"
    default: 512
    description: "The width of the generated image in pixels. SDXL models typically prefer 1024."
  - name: "height"
    type: "int"
    default: 512
    description: "The height of the generated image in pixels. SDXL models typically prefer 1024."
  - name: "num_inference_steps"
    type: "int"
    default: 25
    description: "The number of denoising steps. More steps can lead to higher quality but take longer."
  - name: "guidance_scale"
    type: "float"
    default: 7.0
    description: "Classifier-Free Guidance scale. A higher value makes the image adhere more closely to the prompt."
  - name: "seed"
    type: "int"
    default: -1
    description: "The seed for the random number generator. Use -1 for a random seed."
  - name: "eta"
    type: "float"
    default: 0.0
    description: "A parameter for the DDIM scheduler, controlling the amount of noise added at each step."
  - name: "clip_skip"
    type: "int"
    default: null
    description: "Number of layers to skip from the end of the CLIP model. An advanced parameter for style tuning." 